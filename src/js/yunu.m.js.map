{"version":3,"sources":["yunu.m.js"],"names":["$","window","document","undefined","yunu","letter","arguments","times","fn","Date","timer","st","getTime","et","setTimeout","clearTimeout","throttle","length","type","_","this","scroll","rem","size","html","getElementsByTagName","setSize","_w","documentElement","clientWidth","style","fontSize","onresize","nav","btn","filter","index","css","animation-delay","next","children","t","menu","addClass","each","click","prop","append","event","slideUp","hasClass","slideDown","gotop","body","$window","preventDefault","stopPropagation","scrollTop","fadeIn","fadeOut","getDbJson","key","JSON","parse","localStorage","getItem","val","setItem","stringify","setDbJson","config","fail","always","load_icon","url","load_icon_class","loading","data","load_more_none","XMLHttpRequest","beforeSend","attr","dataType","res","textStatus","limit","done","errorThrown","extend","box","pages","after","imgAuto","co","_this","fncall","name","arg","Image","_h","img","opacity","cover","boxScale","height","wrapAll","parent","width","move","i_w","i_h","b_w","b_h","margin","fadeTo","jQuery"],"mappings":"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","file":"yunu.m.js","sourcesContent":[";(($, window, document, undefined) => {\r\n    window.yunu = {\r\n        letter(fn) {\r\n            if (typeof arguments[0] != 'function') return;\r\n            fn();\r\n            let times = typeof arguments[1] != 'number'?300:arguments[1],\r\n                timer = null,\r\n                st = new Date().getTime();\r\n            return function () {\r\n                let et = new Date().getTime();\r\n                if (et - st < times) {\r\n                    clearTimeout(timer);\r\n                    timer = setTimeout(function () {\r\n                        //return fn.apply(this,arguments);\r\n                        fn();\r\n                    }, times);\r\n                } else{\r\n                    clearTimeout(timer);\r\n                    st = et;\r\n                    fn();\r\n                };\r\n            };\r\n        },\r\n        throttle(fn, timer = 300, type) {\r\n            if (typeof fn != 'function') return;\r\n            fn();\r\n\r\n            typeof _ == 'function'?\r\n            fn = _.throttle(fn, 300):\r\n            fn = this.letter(fn, 300);\r\n\r\n            switch (type) {\r\n                case \"scroll\":\r\n                    $(window).scroll(fn);\r\n                    break;\r\n                default:\r\n                    $(window).resize(fn);\r\n            }\r\n            return this;\r\n        },\r\n        rem(size = 750) {\r\n            let html = document.getElementsByTagName('html')[0],\r\n                setSize = () => {\r\n                let _w = document.documentElement.clientWidth;\r\n                _w = _w > size ? size: _w;\r\n                html.style.fontSize = _w/size * 100 + 'px';\r\n            };\r\n            setSize();\r\n            window.onresize = setSize;\r\n            return this;\r\n        },\r\n        nav() {\r\n            let menu = $('#menu'),\r\n                nav = $('#nav'),\r\n                btn = $('#nav>ul>li>a').filter(function (index) {\r\n                    return $(this).css({'animation-delay': (index/10)+'s'})\r\n                    .next('ul').children().length;\r\n                });\r\n            menu.click(function () {\r\n                nav.hasClass('active')?nav.removeClass('active'):nav.addClass('active');\r\n            });\r\n            btn.each(function () {\r\n                $(this).prop('href', 'javascript:;').append('<i class=\"fa fa-angle-down\"></i>');\r\n            })\r\n            .click(function (event) {\r\n                let t = $(this);\r\n                btn.next('ul').slideUp('fast');\r\n                if (t.hasClass('active')) {\r\n                    t.removeClass('active');\r\n                } else {\r\n                    t.addClass('active').next('ul').slideDown('fast');\r\n                }\r\n            });\r\n            return this;\r\n        },\r\n        gotop() {\r\n            let gotop = $(\"#gotop\"),\r\n                timer = null,\r\n                px = 0,\r\n                body = $('html,body'),\r\n                $window = $(window);\r\n\r\n            gotop.click(() => {\r\n                event.stopPropagation();\r\n                event.preventDefault();\r\n                body.animate({\r\n                    scrollTop: 0\r\n                });\r\n            });\r\n\r\n            yunu.throttle(() => {\r\n                $window.scrollTop() > 50?gotop.fadeIn():gotop.fadeOut();\r\n            }, 300, 'scroll');\r\n            return this;\r\n        },\r\n        //获取缓存中的数据\r\n        getDbJson(key) {\r\n            return JSON.parse(localStorage.getItem(key));\r\n        },\r\n        //写入缓存数据\r\n        setDbJson(key, val) {\r\n            //记录数据存储的时间\r\n            //val.datatime = Math.round(new Date().getTime()/1000);\r\n            localStorage.setItem(key, JSON.stringify(val));\r\n        },\r\n        loadMore(config={}){\r\n            config = $.extend(true, {\r\n                key: true, // load开关\r\n                url: '', // api url\r\n                type: 'POST',\r\n                btn: $('#load_more_btn'), // 加载更多按钮\r\n                box: $('#list>ul'), // 加载内容的容器\r\n                data: { // api接口配置参数\r\n                    pages: 1,\r\n                    limit: 5\r\n                },\r\n                beforeSend: ()=>{}, // 发送请求前\r\n                done: ()=>{}, // 请求成功\r\n                fail: ()=>{}, // 请求失败\r\n                always: ()=>{}, // 请求完成\r\n                load_icon: true, // 是否开启请求等待图标样式\r\n                load_icon_class: '', // 图标尺寸样式 可选: la-sm / la-2x / la-3x\r\n                loading: $('<div class=\"la-ball-fall\"><div></div><div></div><div></div><div></div></div>'), // 按钮load icon元素\r\n                load_more_none: $('<p class=\"load_more_none tac c_red mt20\">没有了</p>') // 没有内容时显示的元素\r\n            }, config);\r\n            var load = function(){\r\n                $.ajax({\r\n                    url: config.url,\r\n                    type: config.type,\r\n                    data: config.data,\r\n                    dataType: \"jsonp\",\r\n                    beforeSend: function(XMLHttpRequest) {\r\n                        config.beforeSend(XMLHttpRequest);\r\n                        config.btn.attr('disabled',true);\r\n                    }\r\n                })\r\n                .done(function(res, textStatus, XMLHttpRequest) {\r\n                    config.done(res, textStatus, XMLHttpRequest);\r\n                    if (!res.data.length || !config.data.limit || res.data.length < config.data.limit) {\r\n                        config.btn.replaceWith(config.load_more_none);\r\n                    }\r\n                })\r\n                .fail(function(XMLHttpRequest, textStatus, errorThrown) {\r\n                    config.fail(XMLHttpRequest, textStatus, errorThrown);\r\n                })\r\n                .always(function(XMLHttpRequest, textStatus, errorThrown) {\r\n                    config.always(XMLHttpRequest, textStatus, errorThrown);\r\n                    config.key = true;\r\n                    config.btn.attr('disabled',false);\r\n                });\r\n            }\r\n            if (config.load_icon) {\r\n                $(config.loading).addClass(config.load_icon_class); // 设置图标大小\r\n                config.btn.after(config.loading); // 装载图标动画\r\n            }\r\n            config.btn.click(function(){\r\n                if (!config.key) return;\r\n                config.key = false;\r\n                config.data.pages++;\r\n                load();\r\n            });\r\n        }\r\n    };\r\n\r\n    yunu.rem();\r\n    $(() => {\r\n        yunu.nav().gotop();\r\n    });\r\n\r\n    $.fn.imgAuto = function(co, fn) {\r\n        fn = fn || {};\r\n        let fncall = (name, arg) => {\r\n            if (typeof fn[name] === 'function') fn[name](arg);\r\n        };\r\n        $(this).each(() => {\r\n            let t = $(this),\r\n                img = new Image(),\r\n                cover = t.attr('img-Auto') == 'cover'||co?true:false,\r\n                _w = t.attr('width'),\r\n                _h = t.attr('height'),\r\n                boxScale = t.attr('box-Scale'),\r\n                box;\r\n            t.css({'display':'block','opacity':0});\r\n            img.src = t.attr('src');\r\n            if ( !t.parent().hasClass('imgAuto_box') && ( t.attr('no-Box') || _w && _h ) ) {\r\n                box = $('<div class=\"imgAuto_box\"></div>');\r\n                box.css({\r\n                    \"width\":_w,\r\n                    \"height\":_h\r\n                });\r\n                t.wrapAll(box);\r\n            }\r\n            box = t.parent();\r\n            box.css('overflow', 'hidden');\r\n            if (boxScale) {\r\n                box.each(() => {\r\n                    let t = $(this);\r\n                    yunu.throttle(() => {\r\n                        t.height(t.width()/boxScale);\r\n                    });\r\n                });\r\n            };\r\n            let move = () => {\r\n                if (img.width>0 || img.height>0) {\r\n                    fncall('imgAutoStart', img);\r\n                    let i_w = img.width,//原图宽\r\n                        i_h = img.height,//原图高\r\n                        b_w = box.width(),//父元素宽\r\n                        b_h = box.height();//父元素高\r\n                    if ( i_w/i_h < b_w/b_h === cover ) {\r\n                        t.css({'width':'100%','height':'auto','margin':-(b_w / (i_w/i_h) - b_h)/2 + 'px 0 0 0'});\r\n                    }else{\r\n                        t.css({'width':'auto','height':'100%','margin':'0 0 0 ' + -(b_h * (i_w/i_h) - b_w)/2 + 'px'});\r\n                    }\r\n                    fncall('callback', img);\r\n                }else{\r\n                    setTimeout(move);\r\n                }\r\n            }\r\n            yunu.throttle(move);\r\n            t.fadeTo('fast', 1);\r\n        });\r\n        return this;\r\n    };\r\n})(jQuery, window, document);\r\n"],"sourceRoot":"src/source/js"}